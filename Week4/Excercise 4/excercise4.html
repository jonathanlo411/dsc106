<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://d3js.org/d3.v7.min.js"></script>
	<title>Lecture 9 Material</title>
</head>
<body>

	<div id="activity1">
		<p>Activity 1: Draw a barchart with an array [1, 2, 3, 4, 5]</p>
	</div>

	<div id="activity2">
		<p>Activity 2: Draw a scatterplot with Sports</p>
	</div>

	<script type="text/javascript">
		
		/* Activity 1: Draw a barchart that visualizes an array */
		let dataset =[5, 3, 2, 4, 1];
		let svgwidth_a1 = 400;
		let svgheight_a1 = 100;
        let barWidth = 20;
        let heightScale = 10;
        let padding = 1;

		let svg_a1 = d3.select("#activity1").append("svg")
			.attr("width", svgwidth_a1)
			.attr("height", svgheight_a1);
		
		// add your code
        svg_a1.selectAll(".a1bar")
            .data(dataset).enter()
                .append("rect")
            .attr("class", "a1bar")
            .attr("x", (d, i) => (i * barWidth) + i * padding)
            .attr("y", d => svgheight_a1 - d * heightScale)
            .attr("width", barWidth)
            .attr("height", d => d * heightScale);

		
		

		/* Activity 2: Draw a scatterplot with Sports */
		let Sports=[
            {"Name":"Player1","Age":19,"Sport":"sport1","cat":"cat1","Rating":100},
            {"Name":"Player2","Age":29,"Sport":"sport1","cat":"cat2","Rating":80},
            {"Name":"Player3","Age":39,"Sport":"sport1","cat":"cat1","Rating":10},
            {"Name":"Player4","Age":15,"Sport":"sport2","cat":"cat2","Rating":90},
            {"Name":"Player5","Age":18,"Sport":"sport2","cat":"cat1","Rating":100},
            {"Name":"Player6","Age":23,"Sport":"sport3","cat":"cat2","Rating":25},
            {"Name":"Player7","Age":19,"Sport":"sport2","cat":"cat1","Rating":70}
    	];

		let svgwidth_a2 = 500;
		let svgheight_a2 = 400;
        let pointRadius = 3;

        let maxHeight = Math.max(...Sports.map(o => o.Rating));
        let maxWidth = Math.max(...Sports.map(o => o.Age));

        // Looks best if innerPadding >= pointRadius
        let innerPadding = 5;
        const xScale = (svgwidth_a2 - innerPadding) / maxWidth
        const yScale = (svgheight_a2 - innerPadding) / maxHeight

		let svg_a2 = d3.select("#activity2").append("svg")
			.attr("width", svgwidth_a2)
			.attr("height", svgheight_a2);

		// add your code
        svg_a2.selectAll(".a2point")
            .data(Sports).enter()
                .append("circle")
            .attr("class", "a2point")
            .attr("cx", d => d.Age * xScale)
            .attr("cy", d => svgheight_a2 - (d.Rating * yScale))
            .attr("r", pointRadius)
            .attr("fill", "#84b1a3")

		

	</script>

</body>
</html>